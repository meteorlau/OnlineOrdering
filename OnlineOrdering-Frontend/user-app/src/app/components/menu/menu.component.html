<h2>ğŸœ èœå–®ç€è¦½</h2>

<!-- ğŸ” æœå°‹æ¬„ -->
<input
  type="text"
  [(ngModel)]="keyword"
  (input)="filterProducts()"
  placeholder="ğŸ” æœå°‹å•†å“åç¨±..."
  style="width: 100%; padding: 0.5rem; margin-bottom: 1rem;"
/>

<!-- âœ… è¨Šæ¯é¡¯ç¤º -->
<div *ngIf="errorMessage" style="color: red;">{{ errorMessage }}</div>
<div *ngIf="successMessage" style="color: green;">{{ successMessage }}</div>

<!-- ğŸ§© å•†å“ç¶²æ ¼å®¹å™¨ -->
<div class="product-grid">
  <div
    *ngFor="let product of filteredProducts"
    class="product-card"
  >
    <!-- ğŸ“· å•†å“åœ–ç‰‡ -->
    <img
      [src]="product.imageUrl"
      alt="å•†å“åœ–ç‰‡"
      class="product-image"
    />

    <!-- ğŸ“„ å•†å“è³‡è¨Š -->
    <h3>{{ product.name }}</h3>
    <p>{{ product.description || 'æš«ç„¡æè¿°' }}</p>

    <!-- ğŸª ä¾›æ‡‰å•†é¸å–® -->
    <label>ä¾›æ‡‰å•†ï¼š</label>
    <select [(ngModel)]="selectedStore[product.id]">
        <option [ngValue]="null">è«‹é¸æ“‡</option>
        <option *ngFor="let s of product.availableStores" [ngValue]="s">
          {{ s.store?.name || 'æœªå‘½åå•†é‹ª' }}ï¼ˆ{{ s.store?.location || 'ç„¡åœ°å€è³‡æ–™' }}ï¼‰
        </option>
      </select>

    <!-- ğŸ“¦ è©³ç´° -->
    <div *ngIf="selectedStore[product.id]">
      <p>åº«å­˜ï¼š{{ selectedStore[product.id].stock }}</p>
      <p>å–®åƒ¹ï¼š{{ selectedStore[product.id].unitPrice | currency: 'USD' }}</p>

      <label>æ•¸é‡ï¼š</label>
      <input
        type="number"
        [(ngModel)]="quantityMap[product.id]"
        [min]="1"
        [max]="selectedStore[product.id].stock"
      />

      <br />
      <button (click)="addToCart(product)">ğŸ›’ åŠ å…¥è³¼ç‰©è»Š</button>
    </div>
  </div>
</div>



